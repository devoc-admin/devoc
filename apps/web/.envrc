{ declare -F source_up >/dev/null 2>&1; } || source "$DIRENV_LIBDIR/stdlib.sh"

# Hérite du root
source_up

# Vars locales
dotenv_if_exists .env
dotenv_if_exists .env.local

# Vérifications d'outils (non bloquantes)
if ! has node; then
    log_error "Manquant (apps/web): node";
    exit 1
fi
if ! has bun; then
    log_error "Manquant (apps/web): bun";
    exit 1
fi

layout node

# Installation locale
bun install >/dev/null 2>&1 || true

log_status "apps/web env prêt."
watch_file .env .env.local package.json
